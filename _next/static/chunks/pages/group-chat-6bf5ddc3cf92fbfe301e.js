(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{5844:function(e,a,t){"use strict";t.r(a),t.d(a,{GroupChatExamplePage:function(){return U},default:function(){return V}});var n,s=t(7378),o=t(5785),p=t(5671),c=t(3144),r=t(7326),m=t(9340),k=t(6215),N=t(1120),l=t(4942),u=t(3349),d=t(9148),i=new Uint8Array(16);function y(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var g=function(e){return"string"===typeof e&&f.test(e)},w=[],h=0;h<256;++h)w.push((h+256).toString(16).substr(1));var b=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(w[e[a+0]]+w[e[a+1]]+w[e[a+2]]+w[e[a+3]]+"-"+w[e[a+4]]+w[e[a+5]]+"-"+w[e[a+6]]+w[e[a+7]]+"-"+w[e[a+8]]+w[e[a+9]]+"-"+w[e[a+10]]+w[e[a+11]]+w[e[a+12]]+w[e[a+13]]+w[e[a+14]]+w[e[a+15]]).toLowerCase();if(!g(t))throw TypeError("Stringified UUID is invalid");return t};var x=function(e,a,t){var n=(e=e||{}).random||(e.rng||y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,a){t=t||0;for(var s=0;s<16;++s)a[t+s]=n[s];return a}return b(n)},S=t(6092),v=t(2834);function G(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,N.Z)(e);if(a){var s=(0,N.Z)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,k.Z)(this,t)}}var Z=function(e){(0,m.Z)(t,e);var a=G(t);function t(e,n){var s;return(0,p.Z)(this,t),(s=a.call(this)).rootStore=e,(0,l.Z)((0,r.Z)(s),"subscriber",u.Subscriber.create(t,(function(e,a){return a(s.state.getState().groups)}))),(0,l.Z)((0,r.Z)(s),"state",void 0),(0,l.Z)((0,r.Z)(s),"createGroup",u.Request.create((0,r.Z)(s),"createGroup",(function(e,a){if(null!=e){var t=x(),n=new C([],void 0);return s.rootStore.addStore(n,t),s.addGroup(t,a),s.addGroup.publishTo({to:"all-except-one",except:e},t,a),(0,S.of)(t)}return s.createGroup.publishTo(s.mainLink,a).pipe((0,v.b)((function(e){return s.addGroup(e,a)})))}))),(0,l.Z)((0,r.Z)(s),"addGroup",u.Action.create((0,r.Z)(s),"addGroup",(function(e,a,t){s.state.setState({groups:[].concat((0,o.Z)(s.state.getState().groups),[{id:a,name:t}])})}))),(0,l.Z)((0,r.Z)(s),"deleteGroup",u.Action.create((0,r.Z)(s),"deleteGroup",(function(e,a){s.state.setState({groups:s.state.getState().groups.filter((function(e){return e.id!==a}))});var t=s.rootStore.storeMap.get(a);null!=e&&null!=t&&t instanceof C&&null==t.ownId&&s.rootStore.destroyStore(t,a),s.deleteGroup.publishTo(null==e?{to:"all"}:{to:"all-except-one",except:e},a)}))),(0,l.Z)((0,r.Z)(s),"editGroup",u.Action.create((0,r.Z)(s),"editGroup",(function(e,a,t){s.state.setState({groups:s.state.getState().groups.map((function(e){return e.id===a?{id:a,name:t}:e}))}),s.editGroup.publishTo(null==e?{to:"all"}:{to:"all-except-one",except:e},a,t)}))),s.state=(0,d.Z)((function(){return{groups:n}})),s}return(0,c.Z)(t,[{key:"onUnlink",value:function(e){}},{key:"onLink",value:function(e){}}]),t}(u.Store),C=function(e){(0,m.Z)(t,e);var a=G(t);function t(e,n){var s;return(0,p.Z)(this,t),(s=a.call(this)).ownId=n,(0,l.Z)((0,r.Z)(s),"subscriber",u.Subscriber.create(t,(function(e,a){return a(s.state.getState().messages,e.userData.id)}))),(0,l.Z)((0,r.Z)(s),"state",void 0),(0,l.Z)((0,r.Z)(s),"sendMessage",u.Action.create((0,r.Z)(s),"sendMessage",(function(e,a){null==e?null!=s.ownId&&(s.addMessage(s.ownId,a),s.sendMessage.publishTo({to:"all"},a)):s.publishMessage.forwardFrom(e,e.connection.userData.id,a)}))),(0,l.Z)((0,r.Z)(s),"publishMessage",u.Action.create((0,r.Z)(s),"publishMessage",(function(e,a,t){s.addMessage(a,t),s.publishMessage.publishTo(null==e?{to:"all"}:{to:"all-except-one",except:e},a,t)}))),s.state=(0,d.Z)((function(){return{messages:e}})),s}return(0,c.Z)(t,[{key:"addMessage",value:function(e,a){this.state.setState({messages:[].concat((0,o.Z)(this.state.getState().messages),[{sender:e,text:a}])})}},{key:"onUnlink",value:function(e){}},{key:"onLink",value:function(e){}}]),t}(u.Store),j=t(4671),M=t(4467),I=t(1655),R=t(7462),_=t(4925),E=t(3905),A=["components"],L={};function T(e){var a=e.components,t=(0,_.Z)(e,A);return(0,E.kt)("wrapper",(0,R.Z)({},L,t,{components:a,mdxType:"MDXLayout"}),(0,E.kt)("h1",null,"Group Chat Example Source Code"),(0,E.kt)("p",null,(0,E.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-share/blob/master/examples/stores/group-chat.ts"},(0,E.kt)("inlineCode",{parentName:"a"},"group-chat.ts"))),(0,E.kt)("pre",{className:"language-typescript"},(0,E.kt)("code",{parentName:"pre",className:"language-typescript"},(0,E.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"type")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Group"))," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," id",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},";")," name",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,E.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatListStore"))," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"extends")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Store"))," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," subscriber",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"GroupChatListStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Group"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"GroupChatListStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"connection",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," accept",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"accept"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"groups"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," state",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreApi"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," groups",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Group"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token function"},"constructor"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"readonly")," rootStore",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RootStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," groups",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Group"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"super"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," groups ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," createGroup",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"name",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"createGroup"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," id ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"uuid"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," groupStore ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatStore")),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"rootStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"addStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"groupStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"addGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"addGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all-except-one"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," except",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," origin ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"of"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"else")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"createGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"mainLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"pipe"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token function"},"tap"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"addGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"private")," addGroup ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"addGroup"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"setState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            groups",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,E.kt)("span",{parentName:"code",className:"token spread operator"},"..."),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"groups"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," deleteGroup ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"deleteGroup"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"setState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            groups",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"groups"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"filter"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!==")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," store ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"rootStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"storeMap"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"get"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"&&")," store ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"&&")," store ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"instanceof")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatStore"))," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"&&")," store",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"ownId")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token comment"},"//workarround to now if we are on the server"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"rootStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"destroyStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"store",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"deleteGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all-except-one"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," except",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," origin ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," editGroup ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"editGroup"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"setState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            groups",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"groups"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"===")," id ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"editGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all-except-one"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," except",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," origin ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," id",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," name",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"onUnlink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"onLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,E.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"type")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Message"))," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    sender",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),"\n    text",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),"\n",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,E.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatStore"))," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"extends")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Store"))," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," subscriber",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"GroupChatStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"messages",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Message"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ownId",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"GroupChatStore"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"connection",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," accept",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token function"},"accept"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"messages"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," connection",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"userData"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," state",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreApi"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," messages",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Message"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token function"},"constructor"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"messages",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Message"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"readonly")," ownId",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"super"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," messages ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," sendMessage ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"sendMessage"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"ownId")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"addMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"ownId"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"sendMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"else")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"publishMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"forwardFrom"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"connection"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"userData"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"private")," publishMessage ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"publishMessage"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," sender",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"addMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"sender",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"publishMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n            origin ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"all-except-one"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," except",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," origin ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            sender",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            text\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"addMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"sender",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," text",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"setState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            messages",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token spread operator"},"..."),(0,E.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"messages"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                    sender",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                    text",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"onUnlink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"onLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,E.kt)("p",null,(0,E.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-share/blob/master/examples/pages/group-chat.tsx"},(0,E.kt)("inlineCode",{parentName:"a"},"group-chat.tsx"))),(0,E.kt)("pre",{className:"language-typescript"},(0,E.kt)("code",{parentName:"pre",className:"language-typescript"},(0,E.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatExamplePage")),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RootStore")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," store ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useStoreSubscription"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"group-chat-list"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1000"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"groups",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Group"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatListStore")),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"rootStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," groups",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        rootStore\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"selectedGroupId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," setSelectedGroupId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token generic-function"},(0,E.kt)("span",{parentName:"span",className:"token function"},"useState"),(0,E.kt)("span",{parentName:"span",className:"token generic class-name"},(0,E.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"span",className:"token builtin"},"string")," ",(0,E.kt)("span",{parentName:"span",className:"token operator"},"|")," ",(0,E.kt)("span",{parentName:"span",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," inputRef ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token generic-function"},(0,E.kt)("span",{parentName:"span",className:"token function"},"useRef"),(0,E.kt)("span",{parentName:"span",className:"token generic class-name"},(0,E.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"HTMLInputElement"),(0,E.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," useStoreState ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token generic-function"},(0,E.kt)("span",{parentName:"span",className:"token function"},"create"),(0,E.kt)("span",{parentName:"span",className:"token generic class-name"},(0,E.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"\n                groups",(0,E.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Group"),(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"["),(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"]"),"\n            ",(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"store",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"store",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," groups ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useStoreState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," groupId ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),"\n            selectedGroupId ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"&&")," groups",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"find"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"===")," selectedGroupId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," selectedGroupId\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," groups",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"length")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"0"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," groups",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,E.kt)("span",{parentName:"code",className:"token number"},"0"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"groups",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," selectedGroupId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div\n            style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                display",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                flexDirection",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"row"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                alignItems",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"stretch"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                justifyContent",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"stretch"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                flexGrow",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"p-3"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," maxWidth",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"300"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," width",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"100%"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"h1",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Groups"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"h1",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"input-group mb-3"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"input\n                        ref",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                        style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                        type",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"text"'),"\n                        className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"form-control"'),"\n                        placeholder",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"Group Name"'),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"input-group-append"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"button\n                            className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-primary"'),"\n                            onClick",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                                ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"current")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"&&")," inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"value"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"length")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"0"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                                    store",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"createGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"value"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"subscribe"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                            type",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"button"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                            ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Create"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"groups",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div\n                        className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"d-flex align-items-center justify-content-between"'),"\n                        key",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                        style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," cursor",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"pointer"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                        onClick",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"setSelectedGroupId"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"span className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"groupId ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"===")," group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"fw-bold"')," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'""'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"name"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"button className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-danger"')," onClick",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," store",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"deleteGroup"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"group",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                            ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Delete"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," display",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," alignItems",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"stretch"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," justifyContent",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"stretch"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"groupId ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," display",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," alignItems",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"center"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," justifyContent",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"center"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," flexGrow",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Create")," a ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Group"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Suspense")," fallback",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Loading")," ",(0,E.kt)("span",{parentName:"code",className:"token spread operator"},"..."),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"GroupChat")," groupId",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"groupId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," rootStore",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"rootStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Suspense"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChat")),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," groupId ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," groupId",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},";")," rootStore",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RootStore")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," groupChatStore ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useStoreSubscription"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        groupId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1000"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"messages",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Message"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ownId",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token builtin"},"string")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,E.kt)("span",{parentName:"code",className:"token class-name"},(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"GroupChatStore")),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"messages",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ownId",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        rootStore\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token comment"},"//buggy: guess: suspense will not unmount this component and thus the api is not resubscribed"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," useStoreState ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token generic-function"},(0,E.kt)("span",{parentName:"span",className:"token function"},"create"),(0,E.kt)("span",{parentName:"span",className:"token generic class-name"},(0,E.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"{")," messages",(0,E.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Message"),(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"["),(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"]")," ",(0,E.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"groupChatStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"["),"groupChatStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," messages ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token function"},"useStoreState"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword"},"const")," inputRef ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,E.kt)("span",{parentName:"code",className:"token generic-function"},(0,E.kt)("span",{parentName:"span",className:"token function"},"useRef"),(0,E.kt)("span",{parentName:"span",className:"token generic class-name"},(0,E.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"span",className:"token maybe-class-name"},"HTMLInputElement"),(0,E.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," display",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," flexDirection",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"column"'),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," alignItems",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token string"},'"stretch"')," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"messages",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"message",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},",")," index",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"p key",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"index",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"strong",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"message",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"sender"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"strong",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"message",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"text"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"p",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"input-group mb-3"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"input\n                    ref",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                    style",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,E.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                    type",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"text"'),"\n                    className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"form-control"'),"\n                    placeholder",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"Message"'),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"input-group-append"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),"button\n                        className",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-primary"'),"\n                        onClick",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                            ",(0,E.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"current")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,E.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"&&")," inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"value"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"length")," ",(0,E.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,E.kt)("span",{parentName:"code",className:"token number"},"0"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                                groupChatStore",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token method function property-access"},"sendMessage"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"("),"inputRef",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,E.kt)("span",{parentName:"code",className:"token property-access"},"value"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                            ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                        type",(0,E.kt)("span",{parentName:"code",className:"token operator"},"="),(0,E.kt)("span",{parentName:"code",className:"token string"},'"button"'),(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,E.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Send"),"\n                    ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,E.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,E.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,E.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,E.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")))}T.isMDXComponent=!0;var D=t(9138),O=t(8077),P=t(4246);function V(){return(0,P.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,P.jsx)(I.h,{selectedIndex:3}),(0,P.jsxs)("div",{className:"d-flex flex-column justify-content-stretch container-lg",children:[(0,P.jsx)("div",{className:"d-flex flex-row-responsive",children:(0,P.jsx)(M.X,{initStores:function(e){return e.addStore(new Z(e,[]),"group-chat-list")},children:function(e){return(0,P.jsx)(U,{rootStore:e})}})}),(0,P.jsx)("div",{className:"p-3 flex-basis-0 flex-grow-1",children:(0,P.jsx)(T,{})})]}),(0,P.jsx)(D.$,{})]})}function U(e){var a=e.rootStore,t=(0,O.useStoreSubscription)("group-chat-list",1e3,(function(e){return new Z(a,e)}),void 0,a),n=(0,s.useState)(void 0),o=n[0],p=n[1],c=(0,s.useRef)(null),r=(0,s.useMemo)((function(){return(0,j.Z)(t.state)}),[t])().groups,m=(0,s.useMemo)((function(){return null!=o&&null!=r.find((function(e){return e.id===o}))?o:r.length>0?r[0].id:void 0}),[r,o]);return(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"stretch",flexGrow:1},className:"p-3",children:[(0,P.jsxs)("div",{style:{maxWidth:300,width:"100%"},children:[(0,P.jsx)("h1",{children:"Groups"}),(0,P.jsxs)("div",{className:"input-group mb-3",children:[(0,P.jsx)("input",{ref:c,style:{flexGrow:1},type:"text",className:"form-control",placeholder:"Group Name"}),(0,P.jsx)("div",{className:"input-group-append",children:(0,P.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){null!=c.current&&c.current.value.length>0&&t.createGroup(c.current.value).subscribe()},type:"button",children:"Create"})})]}),r.map((function(e){return(0,P.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{cursor:"pointer"},onClick:function(){return p(e.id)},children:[(0,P.jsx)("span",{className:m===e.id?"fw-bold":"",children:e.name}),(0,P.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return t.deleteGroup(e.id)},children:"Delete"})]},e.id)}))]}),(0,P.jsx)("div",{style:{flexGrow:1,display:"flex",alignItems:"stretch",justifyContent:"stretch"},children:null==m?(0,P.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:"Create a Group"}):(0,P.jsx)(s.Suspense,{fallback:(0,P.jsx)("span",{children:"Loading ..."}),children:(0,P.jsx)(X,{groupId:m,rootStore:a})})})]})}function X(e){var a=e.rootStore,t=e.groupId,n=(0,O.useStoreSubscription)(t,1e3,(function(e,a){return new C(e,a)}),void 0,a),o=(0,s.useMemo)((function(){return(0,j.Z)(n.state)}),[n])().messages,p=(0,s.useRef)(null);return(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:[o.map((function(e,a){return(0,P.jsxs)("p",{children:[(0,P.jsx)("strong",{children:e.sender}),": ",e.text]},a)})),(0,P.jsx)("div",{style:{flexGrow:1}}),(0,P.jsxs)("div",{className:"input-group mb-3",children:[(0,P.jsx)("input",{ref:p,style:{flexGrow:1},type:"text",className:"form-control",placeholder:"Message"}),(0,P.jsx)("div",{className:"input-group-append",children:(0,P.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){null!=p.current&&p.current.value.length>0&&n.sendMessage(p.current.value)},type:"button",children:"Send"})})]})]})}},1234:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/group-chat",function(){return t(5844)}])},4671:function(e,a,t){"use strict";t.d(a,{Z:function(){return p}});var n=t(7378);function s(e){let a;const t=new Set,n=(e,n)=>{const s="function"===typeof e?e(a):e;if(s!==a){const e=a;a=n?s:Object.assign({},a,s),t.forEach((t=>t(a,e)))}},s=()=>a,o={setState:n,getState:s,subscribe:(e,n,o)=>n||o?((e,n=s,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=n(a);function c(){const t=n(a);if(!o(p,t)){const a=p;e(p=t,a)}}return t.add(c),()=>t.delete(c)})(e,n,o):(t.add(e),()=>t.delete(e)),destroy:()=>t.clear()};return a=e(n,s,o),o}const o="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?n.useEffect:n.useLayoutEffect;function p(e){const a="function"===typeof e?s(e):e,t=(e=a.getState,t=Object.is)=>{const[,s]=(0,n.useReducer)((e=>e+1),0),p=a.getState(),c=(0,n.useRef)(p),r=(0,n.useRef)(e),m=(0,n.useRef)(t),k=(0,n.useRef)(!1),N=(0,n.useRef)();let l;void 0===N.current&&(N.current=e(p));let u=!1;(c.current!==p||r.current!==e||m.current!==t||k.current)&&(l=e(p),u=!t(N.current,l)),o((()=>{u&&(N.current=l),c.current=p,r.current=e,m.current=t,k.current=!1}));const d=(0,n.useRef)(p);o((()=>{const e=()=>{try{const e=a.getState(),t=r.current(e);m.current(N.current,t)||(c.current=e,N.current=t,s())}catch(e){k.current=!0,s()}},t=a.subscribe(e);return a.getState()!==d.current&&e(),t}),[]);const i=u?l:N.current;return(0,n.useDebugValue)(i),i};return Object.assign(t,a),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[t,a];return{next(){const a=e.length<=0;return{value:e.shift(),done:a}}}},t}},9148:function(e,a,t){"use strict";function n(e){let a;const t=new Set,n=(e,n)=>{const s="function"===typeof e?e(a):e;if(s!==a){const e=a;a=n?s:Object.assign({},a,s),t.forEach((t=>t(a,e)))}},s=()=>a,o={setState:n,getState:s,subscribe:(e,n,o)=>n||o?((e,n=s,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=n(a);function c(){const t=n(a);if(!o(p,t)){const a=p;e(p=t,a)}}return t.add(c),()=>t.delete(c)})(e,n,o):(t.add(e),()=>t.delete(e)),destroy:()=>t.clear()};return a=e(n,s,o),o}t.d(a,{Z:function(){return n}})},6092:function(e,a,t){"use strict";function n(e){return e&&"function"===typeof e.schedule}t.d(a,{of:function(){return m}});var s=t(5832),o=t(4464),p=t(8189);function c(e,a){return new s.y((function(t){var n=new p.w,s=0;return n.add(a.schedule((function(){s!==e.length?(t.next(e[s++]),t.closed||n.add(this.schedule())):t.complete()}))),n}))}function r(e,a){return a?c(e,a):new s.y((0,o.V)(e))}function m(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var t=e[e.length-1];return n(t)?(e.pop(),c(e,t)):r(e)}},2834:function(e,a,t){"use strict";t.d(a,{b:function(){return c}});var n=t(9312),s=t(8036),o=t(5656),p=t(5427);function c(e,a,t){return function(n){return n.lift(new r(e,a,t))}}var r=function(){function e(e,a,t){this.nextOrObserver=e,this.error=a,this.complete=t}return e.prototype.call=function(e,a){return a.subscribe(new m(e,this.nextOrObserver,this.error,this.complete))},e}(),m=function(e){function a(a,t,n,s){var c=e.call(this,a)||this;return c._tapNext=o.Z,c._tapError=o.Z,c._tapComplete=o.Z,c._tapError=n||o.Z,c._tapComplete=s||o.Z,(0,p.m)(t)?(c._context=c,c._tapNext=t):t&&(c._context=t,c._tapNext=t.next||o.Z,c._tapError=t.error||o.Z,c._tapComplete=t.complete||o.Z),c}return n.ZT(a,e),a.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(a){return void this.destination.error(a)}this.destination.next(e)},a.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},a.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},a}(s.L)},5656:function(e,a,t){"use strict";function n(){}t.d(a,{Z:function(){return n}})},4464:function(e,a,t){"use strict";t.d(a,{V:function(){return n}});var n=function(e){return function(a){for(var t=0,n=e.length;t<n&&!a.closed;t++)a.next(e[t]);a.complete()}}}},function(e){e.O(0,[667,377,100,774,888,179],(function(){return a=1234,e(e.s=a);var a}));var a=e.O();_N_E=a}]);